# Minimal Temporal Helm values for the shop demo.
# Uses existing Postgres in namespace `infra`. Secret temporal-db-secret is in this manifest set.
# Order-service expects: temporal-frontend.temporal.svc.cluster.local:7233 and namespace "temporal".

server:
  config:
    persistence:
      defaultStore: default
      visibilityStore: visibility
      numHistoryShards: 4
      datastores:
        default:
          sql:
            createDatabase: true
            manageSchema: true
            pluginName: postgres12
            driverName: postgres12
            databaseName: temporal
            connectAddr: "postgres.infra.svc.cluster.local:5432"
            connectProtocol: tcp
            user: postgres
            existingSecret: temporal-db-secret
            secretKey: password
        visibility:
          sql:
            createDatabase: true
            manageSchema: true
            pluginName: postgres12
            driverName: postgres12
            databaseName: temporal_visibility
            connectAddr: "postgres.infra.svc.cluster.local:5432"
            connectProtocol: tcp
            user: postgres
            existingSecret: temporal-db-secret
            secretKey: password
    namespaces:
      create: true
      namespace:
        - name: default
          retention: 72h
        - name: temporal
          retention: 72h
